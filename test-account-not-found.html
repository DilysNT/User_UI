<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo: T√†i kho·∫£n kh√¥ng t·ªìn t·∫°i</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; }
        .demo-card { background: white; border-radius: 12px; padding: 20px; margin: 20px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .login-form { max-width: 400px; margin: 0 auto; }
        input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 6px; }
        button { width: 100%; padding: 12px; background: #14b8a6; color: white; border: none; border-radius: 6px; cursor: pointer; margin: 8px 0; }
        button:hover { background: #0f766e; }
        .error { color: #ef4444; text-align: center; margin: 10px 0; font-size: 14px; }
        .success { color: #10b981; text-align: center; margin: 10px 0; font-size: 14px; }
        
        /* Account Not Found Component Styles */
        .account-not-found {
            background: #fffbeb;
            border: 1px solid #fed7aa;
            border-radius: 8px;
            padding: 16px;
            margin: 16px 0;
            display: none;
        }
        .account-not-found.show { display: block; }
        .account-not-found .header { display: flex; align-items: start; }
        .account-not-found .icon { flex-shrink: 0; margin-right: 12px; color: #f59e0b; }
        .account-not-found .content { flex: 1; }
        .account-not-found h3 { margin: 0 0 8px 0; color: #92400e; font-size: 14px; font-weight: 600; }
        .account-not-found p { margin: 0 0 12px 0; color: #92400e; font-size: 14px; }
        .account-not-found .email { font-weight: bold; }
        .account-not-found .actions { display: flex; flex-direction: column; gap: 8px; }
        .account-not-found .actions button { margin: 0; padding: 8px 12px; font-size: 14px; }
        .btn-primary { background: #14b8a6; }
        .btn-primary:hover { background: #0f766e; }
        .btn-secondary { background: white; color: #374151; border: 1px solid #d1d5db; }
        .btn-secondary:hover { background: #f9fafb; }
        
        @media (min-width: 640px) {
            .account-not-found .actions { flex-direction: row; }
        }
        
        .feature-list { background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 8px; padding: 16px; margin: 16px 0; }
        .feature-list h4 { margin: 0 0 12px 0; color: #166534; }
        .feature-list ul { margin: 0; padding-left: 20px; color: #166534; }
        .feature-list li { margin: 4px 0; }
        
        .demo-scenarios { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; margin: 20px 0; }
        .scenario { background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 8px; padding: 16px; }
        .scenario h4 { margin: 0 0 8px 0; color: #1e293b; }
        .scenario p { margin: 0 0 12px 0; color: #64748b; font-size: 14px; }
        .scenario button { background: #3b82f6; font-size: 14px; }
        .scenario button:hover { background: #2563eb; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîê Demo: X·ª≠ l√Ω t√†i kho·∫£n kh√¥ng t·ªìn t·∫°i</h1>
        
        <div class="demo-card">
            <h2>üìã T√≠nh nƒÉng ƒë√£ implement:</h2>
            <div class="feature-list">
                <h4>‚úÖ C√°c c·∫£i ti·∫øn:</h4>
                <ul>
                    <li><strong>Ph√°t hi·ªán t√†i kho·∫£n kh√¥ng t·ªìn t·∫°i:</strong> API response status 404 ho·∫∑c message ch·ª©a "not found"</li>
                    <li><strong>Th√¥ng b√°o ti·∫øng Vi·ªát:</strong> Hi·ªÉn th·ªã email c·ª• th·ªÉ kh√¥ng t·ªìn t·∫°i</li>
                    <li><strong>UI th√¢n thi·ªán:</strong> Component warning v·ªõi icon v√† styling chuy√™n nghi·ªáp</li>
                    <li><strong>G·ª£i √Ω t·∫°o t√†i kho·∫£n:</strong> Button tr·ª±c ti·∫øp ƒë·∫øn form ƒëƒÉng k√Ω</li>
                    <li><strong>X·ª≠ l√Ω l·ªói chi ti·∫øt:</strong> Ph√¢n bi·ªát l·ªói password sai vs t√†i kho·∫£n kh√¥ng t·ªìn t·∫°i</li>
                    <li><strong>UX t·ªët:</strong> C√≥ th·ªÉ th·ª≠ email kh√°c ho·∫∑c t·∫°o t√†i kho·∫£n m·ªõi</li>
                </ul>
            </div>
        </div>

        <div class="demo-card">
            <h2>üéØ Demo Login Form</h2>
            <div class="login-form">
                <div style="text-align: center; margin-bottom: 24px;">
                    <h3 style="margin: 0 0 8px 0; color: #1f2937;">ƒêƒÉng Nh·∫≠p</h3>
                    <p style="margin: 0; color: #6b7280; font-size: 14px;">Ch√†o m·ª´ng b·∫°n quay tr·ªü l·∫°i!</p>
                </div>
                
                <form id="demoLoginForm">
                    <input type="email" id="email" placeholder="Email" value="" />
                    <input type="password" id="password" placeholder="M·∫≠t kh·∫©u" value="123456" />
                    
                    <div id="error-message" class="error"></div>
                    <div id="success-message" class="success"></div>
                    
                    <!-- Account Not Found Component -->
                    <div id="account-not-found" class="account-not-found">
                        <div class="header">
                            <div class="icon">
                                <svg style="width: 20px; height: 20px;" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                                </svg>
                            </div>
                            <div class="content">
                                <h3>T√†i kho·∫£n kh√¥ng t·ªìn t·∫°i</h3>
                                <p>Email <span id="not-found-email" class="email"></span> ch∆∞a ƒë∆∞·ª£c ƒëƒÉng k√Ω trong h·ªá th·ªëng.</p>
                                <div class="actions">
                                    <button type="button" class="btn-primary" onclick="goToRegister()">
                                        ‚ûï T·∫°o t√†i kho·∫£n m·ªõi
                                    </button>
                                    <button type="button" class="btn-secondary" onclick="hideAccountNotFound()">
                                        Th·ª≠ email kh√°c
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button type="submit">ƒêƒÉng Nh·∫≠p</button>
                </form>
                
                <div style="text-align: center; margin-top: 12px;">
                    <span style="color: #6b7280; font-size: 12px;">Ch∆∞a c√≥ t√†i kho·∫£n? </span>
                    <button type="button" style="background: none; border: none; color: #14b8a6; text-decoration: underline; font-size: 14px; cursor: pointer;" onclick="showRegisterModal()">
                        T·∫°o t√†i kho·∫£n
                    </button>
                </div>
            </div>
        </div>

        <div class="demo-card">
            <h2>üß™ Test Scenarios</h2>
            <div class="demo-scenarios">
                <div class="scenario">
                    <h4>üìß Email kh√¥ng t·ªìn t·∫°i</h4>
                    <p>Test v·ªõi email ch∆∞a ƒëƒÉng k√Ω</p>
                    <button onclick="testScenario('notexist@example.com')">Test Email Kh√¥ng T·ªìn T·∫°i</button>
                </div>
                
                <div class="scenario">
                    <h4>üîë M·∫≠t kh·∫©u sai</h4>
                    <p>Test v·ªõi email t·ªìn t·∫°i nh∆∞ng m·∫≠t kh·∫©u sai</p>
                    <button onclick="testScenario('user@example.com', 'wrongpass')">Test M·∫≠t Kh·∫©u Sai</button>
                </div>
                
                <div class="scenario">
                    <h4>üåê L·ªói m·∫°ng</h4>
                    <p>Test khi kh√¥ng k·∫øt n·ªëi ƒë∆∞·ª£c server</p>
                    <button onclick="testNetworkError()">Test L·ªói M·∫°ng</button>
                </div>
                
                <div class="scenario">
                    <h4>‚úÖ ƒêƒÉng nh·∫≠p th√†nh c√¥ng</h4>
                    <p>Test v·ªõi th√¥ng tin ƒë√∫ng</p>
                    <button onclick="testScenario('user@example.com', '123456')">Test Th√†nh C√¥ng</button>
                </div>
            </div>
        </div>

        <div class="demo-card">
            <h2>üíª Implementation Code</h2>
            <div style="background: #1f2937; color: #f9fafb; padding: 16px; border-radius: 8px; font-family: 'Courier New', monospace; font-size: 12px; overflow-x: auto;">
// Auth.tsx - handleLogin function
const handleLogin = async (e: React.FormEvent) => {
  // ... validation code ...
  
  try {
    const res = await fetch("/api/auth/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email, password }),
    });
    
    const data = await res.json();
    
    if (!res.ok) {
      // ‚úÖ X·ª≠ l√Ω t√†i kho·∫£n kh√¥ng t·ªìn t·∫°i
      if (res.status === 404 || 
          data.message?.includes('not found') || 
          data.message?.includes('kh√¥ng t·ªìn t·∫°i')) {
        setNotFoundEmail(loginData.email);
        setShowAccountNotFound(true);
      } 
      // ‚úÖ X·ª≠ l√Ω m·∫≠t kh·∫©u sai
      else if (res.status === 401 || 
               data.message?.includes('password')) {
        setLoginError("M·∫≠t kh·∫©u kh√¥ng ch√≠nh x√°c...");
      } 
      // ‚úÖ X·ª≠ l√Ω l·ªói kh√°c
      else {
        setLoginError(data.message || "ƒêƒÉng nh·∫≠p th·∫•t b·∫°i.");
      }
    } else {
      // ‚úÖ ƒêƒÉng nh·∫≠p th√†nh c√¥ng
      setLoginSuccess("ƒêƒÉng nh·∫≠p th√†nh c√¥ng!");
      // ... redirect logic ...
    }
  } catch (err) {
    // ‚úÖ X·ª≠ l√Ω l·ªói k·∫øt n·ªëi
    setLoginError("L·ªói k·∫øt n·ªëi m√°y ch·ªß...");
  }
};
            </div>
        </div>
    </div>

    <script>
        // Form submission handler
        document.getElementById('demoLoginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            clearMessages();
            
            if (!email || !password) {
                showError('Vui l√≤ng nh·∫≠p email v√† m·∫≠t kh·∫©u.');
                return;
            }
            
            // Simulate API call
            simulateLogin(email, password);
        });
        
        function simulateLogin(email, password) {
            // Clear previous messages
            clearMessages();
            
            // Simulate different scenarios based on email
            setTimeout(() => {
                if (email.includes('notexist') || email === 'test@notfound.com') {
                    // Account not found
                    showAccountNotFound(email);
                } else if (password === 'wrongpass') {
                    // Wrong password
                    showError('M·∫≠t kh·∫©u kh√¥ng ch√≠nh x√°c. Vui l√≤ng th·ª≠ l·∫°i ho·∫∑c s·ª≠ d·ª•ng "Qu√™n m·∫≠t kh·∫©u".');
                } else if (email === 'user@example.com' && password === '123456') {
                    // Success
                    showSuccess('ƒêƒÉng nh·∫≠p th√†nh c√¥ng!');
                    setTimeout(() => {
                        alert('Chuy·ªÉn h∆∞·ªõng v·ªÅ trang ch·ªß...');
                    }, 1000);
                } else {
                    // Generic error
                    showError('ƒêƒÉng nh·∫≠p th·∫•t b·∫°i. Vui l√≤ng ki·ªÉm tra l·∫°i th√¥ng tin.');
                }
            }, 500);
        }
        
        function testScenario(email, password = '123456') {
            document.getElementById('email').value = email;
            document.getElementById('password').value = password;
            simulateLogin(email, password);
        }
        
        function testNetworkError() {
            clearMessages();
            showError('L·ªói k·∫øt n·ªëi m√°y ch·ªß. Vui l√≤ng ki·ªÉm tra k·∫øt n·ªëi internet v√† th·ª≠ l·∫°i.');
        }
        
        function showAccountNotFound(email) {
            document.getElementById('not-found-email').textContent = email;
            document.getElementById('account-not-found').classList.add('show');
        }
        
        function hideAccountNotFound() {
            document.getElementById('account-not-found').classList.remove('show');
        }
        
        function showError(message) {
            document.getElementById('error-message').textContent = message;
        }
        
        function showSuccess(message) {
            document.getElementById('success-message').textContent = message;
        }
        
        function clearMessages() {
            document.getElementById('error-message').textContent = '';
            document.getElementById('success-message').textContent = '';
            hideAccountNotFound();
        }
        
        function goToRegister() {
            alert('Chuy·ªÉn ƒë·∫øn trang ƒëƒÉng k√Ω v·ªõi email: ' + document.getElementById('not-found-email').textContent);
            hideAccountNotFound();
        }
        
        function showRegisterModal() {
            alert('Hi·ªÉn th·ªã modal ch·ªçn lo·∫°i t√†i kho·∫£n (Kh√°ch h√†ng / Doanh nghi·ªáp)');
        }
    </script>
</body>
</html>
